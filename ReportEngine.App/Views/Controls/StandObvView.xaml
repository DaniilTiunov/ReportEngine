<UserControl
    x:Class="ReportEngine.App.Views.Controls.StandObvView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Loaded="StandObvView_Loaded"
    d:Background="White"
    FontSize="12"
    mc:Ignorable="d">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" /> <!-- Основная форма -->
            <ColumnDefinition Width="350" /> <!-- Список стендов -->
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" /> <!-- Основное содержимое -->
        </Grid.RowDefinitions>

        <!-- Основная форма (слева) -->
        <Grid Grid.Column="0" Margin="0,0,10,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Обвязка Section -->
            <GroupBox Grid.Row="0" Header="Обвязка" Margin="0,0,0,10" Padding="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="180" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Тип обвязки -->
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Тип обвязки:" />
                    <TextBox Grid.Row="0" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.ObvyazkaType}" />
                    <TextBlock Grid.Row="0" Grid.Column="2" Margin="5,0,0,0" Text="NN:" />
                    <TextBox Grid.Row="0" Grid.Column="3" Width="80" Text="{Binding CurrentProjectModel.SelectedStand.NN}" />

                    <!-- Материал линии -->
                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Материал линии:" />
                    <TextBox Grid.Row="1" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.MaterialLine}" />
                    <Button Grid.Row="1" Grid.Column="3" Width="24" Command="{Binding ProjectCommandProvider.SelectMaterialLineDialogCommand}" Content="..." />

                    <!-- Арматура -->
                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Арматура:" />
                    <TextBox Grid.Row="2" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.Armature}" />
                    <Button Grid.Row="2" Grid.Column="3" Width="24" Command="{Binding ProjectCommandProvider.SelectArmatureDialogCommand}" Content="..." />

                    <!-- Тройник -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Тройник:" />
                    <TextBox Grid.Row="3" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.TreeSocket}" />
                    <Button Grid.Row="3" Grid.Column="3" Width="24" Content="..." />

                    <!-- КМЧ -->
                    <TextBlock Grid.Row="4" Grid.Column="0" Text="КМЧ:" />
                    <TextBox Grid.Row="4" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.KMCH}" />
                    <Button Grid.Row="4" Grid.Column="3" Width="24" Content="..." />
                </Grid>
            </GroupBox>

            <!-- Датчик 1 -->
            <GroupBox Grid.Row="1" Header="Датчик 1" Margin="0,0,0,10" Padding="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Тип датчика:" />
                    <ComboBox Grid.Row="0" Grid.Column="1" Margin="0,0,5,0"
                              ItemsSource="{Binding CurrentProjectModel.SelectedStand.SensorType}"
                              SelectedItem="{Binding CurrentProjectModel.SelectedStand.FirstSensorType, Mode=TwoWay}" />

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="KKS-контура:" />
                    <TextBox Grid.Row="1" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.FirstSensorKKSCounter}" />

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Маркировка (+):" />
                    <TextBox Grid.Row="2" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.FirstSensorMarkPlus}" />

                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Маркировка (-):" />
                    <TextBox Grid.Row="3" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.FirstSensorMarkMinus}" />

                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Описание:" />
                    <TextBox Grid.Row="4" Grid.Column="1" Height="40" Margin="0,0,5,0" AcceptsReturn="True" TextWrapping="Wrap"
                             Text="{Binding CurrentProjectModel.SelectedStand.Sensor1.Description}" />
                </Grid>
            </GroupBox>

            <!-- Датчик 2 -->
            <GroupBox Grid.Row="2" Header="Датчик 2" Margin="0,0,0,10" Padding="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Тип датчика:" />
                    <ComboBox Grid.Row="0" Grid.Column="1" Margin="0,0,5,0" ItemsSource="{Binding SensorTypes}"
                              SelectedItem="{Binding CurrentProjectModel.SelectedStand.Sensor2.Type}" />

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="KKS-контура:" />
                    <TextBox Grid.Row="1" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.Sensor2.KKSCircuit}" />

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Маркировка (+):" />
                    <TextBox Grid.Row="2" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.Sensor2.MarkingPlus}" />

                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Маркировка (-):" />
                    <TextBox Grid.Row="3" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.Sensor2.MarkingMinus}" />

                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Описание:" />
                    <TextBox Grid.Row="4" Grid.Column="1" Height="40" Margin="0,0,5,0" AcceptsReturn="True" TextWrapping="Wrap"
                             Text="{Binding CurrentProjectModel.SelectedStand.Sensor2.Description}" />
                </Grid>
            </GroupBox>

            <!-- Датчик 3 -->
            <GroupBox Grid.Row="3" Header="Датчик 3" Margin="0,0,0,10" Padding="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Тип датчика:" />
                    <ComboBox Grid.Row="0" Grid.Column="1" Margin="0,0,5,0" ItemsSource="{Binding SensorType}"
                              SelectedItem="{Binding CurrentProjectModel.SelectedStand.Sensor3.Type}" />

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="KKS-контура:" />
                    <TextBox Grid.Row="1" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.Sensor3.KKSCircuit}" />

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Маркировка (+):" />
                    <TextBox Grid.Row="2" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.Sensor3.MarkingPlus}" />

                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Маркировка (-):" />
                    <TextBox Grid.Row="3" Grid.Column="1" Margin="0,0,5,0" Text="{Binding CurrentProjectModel.SelectedStand.Sensor3.MarkingMinus}" />

                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Описание:" />
                    <TextBox Grid.Row="4" Grid.Column="1" Height="40" Margin="0,0,5,0" AcceptsReturn="True" TextWrapping="Wrap"
                             Text="{Binding CurrentProjectModel.SelectedStand.Sensor3.Description}" />
                </Grid>
            </GroupBox>

            <!-- Список обвязок -->
            <ListView Grid.Row="4" Margin="0,10,0,0" BorderBrush="#DDDDDD" BorderThickness="1"
                      ItemsSource="{Binding CurrentProjectModel.SelectedStand.ObvyazkiInStand}"
                      SelectedItem="{Binding CurrentProjectModel.SelectedStand.SelectedObvyazka}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Width="100" Header="Тип" DisplayMemberBinding="{Binding ObvyazkaId}" />
                        <GridViewColumn Width="120" Header="Материал" DisplayMemberBinding="{Binding MaterialLine}" />
                        <GridViewColumn Width="100" Header="Арматура" DisplayMemberBinding="{Binding Armature}" />
                        <GridViewColumn Width="100" Header="Тройник" DisplayMemberBinding="{Binding TreeSocket}" />
                        <GridViewColumn Width="100" Header="КМЧ" DisplayMemberBinding="{Binding KMCH}" />
                        <GridViewColumn Width="100" Header="Датчик 1" DisplayMemberBinding="{Binding FirstSensorType}" />
                    </GridView>
                </ListView.View>
            </ListView>

            <!-- Кнопки управления -->
            <StackPanel Grid.Row="5" HorizontalAlignment="Right" Margin="0,10,0,0">
                <Button Width="120" Height="30" Content="Добавить" Command="{Binding ProjectCommandProvider.SaveObvCommand}" />
            </StackPanel>
        </Grid>

        <!-- Список стендов (справа) -->
        <Border Grid.Column="1" BorderBrush="#DDDDDD" BorderThickness="1" Margin="0,0,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Margin="5" FontWeight="Bold" Text="Список стендов проекта" />
                <ListView Grid.Row="1" ItemsSource="{Binding CurrentProjectModel.Stands}"
                          SelectedItem="{Binding CurrentProjectModel.SelectedStand, Mode=TwoWay}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Width="40" Header="№" DisplayMemberBinding="{Binding Number}" />
                            <GridViewColumn Width="120" Header="KKS" DisplayMemberBinding="{Binding KKSCode}" />
                            <GridViewColumn Width="200" Header="Обозначение" DisplayMemberBinding="{Binding Design}" />
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </Border>
    </Grid>
</UserControl>
