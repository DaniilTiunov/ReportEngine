<Window
    x:Class="ReportEngine.App.Views.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Настройки приложения"
    Width="700"
    Height="500"
    mc:Ignorable="d">

    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!--  Меню категорий  -->
        <ListBox
            x:Name="SettingsCategories"
            Margin="0,0,16,0"
            BorderThickness="0"
            SelectionChanged="SettingsCategories_SelectionChanged">
            <ListBoxItem
                Content="Основные"
                IsSelected="True"
                Tag="GeneralSettings" />
            <ListBoxItem Content="Подключение" Tag="ConnectionSettings" />
            <ListBoxItem Content="Оформление" Tag="DesignSettings" />
            <ListBoxItem Content="Другое" Tag="OtherSettings" />
        </ListBox>

        <!--  Область с настройками  -->
        <StackPanel
            Grid.Column="1"
            Margin="0"
            Background="{DynamicResource MaterialDesignPaper}">

            <!--  Заголовок  -->
            <TextBlock
                x:Name="SettingsTitle"
                Margin="0,0,0,10"
                FontSize="20"
                FontWeight="Bold"
                Text="Основные настройки" />

            <!--  Основные настройки  -->
            <StackPanel x:Name="GeneralSettingsPanel" Visibility="Visible">
                <TextBlock Margin="0,0,0,4" Text="Директория для сохранения отчётов:" />
                <DockPanel>
                    <TextBox
                        x:Name="ReportDirBox"
                        Width="400"
                        Text="{Binding SaveReportDirPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <Button
                        x:Name="BrowseReportDirButton"
                        Width="40"
                        Margin="4,0,0,0"
                        Command="{Binding OpenDialog}"
                        Content="..." />
                </DockPanel>
            </StackPanel>

            <!--  Подключение  -->
            <StackPanel x:Name="ConnectionSettingsPanel" Visibility="Collapsed">
                <TextBlock Margin="0,0,0,4" Text="Адрес сервера БД:" />
                <TextBox
                    x:Name="DbServerBox"
                    Width="400"
                    Text="{Binding ConnectionString, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Margin="0,8,0,4" Text="Порт:" />
                <TextBox
                    x:Name="DbPortBox"
                    Width="100"
                    Text="5432" />

                <TextBlock Margin="0,8,0,4" Text="Имя базы:" />
                <TextBox
                    x:Name="DbNameBox"
                    Width="200"
                    Text="mydb" />

                <TextBlock Margin="0,8,0,4" Text="Пользователь:" />
                <TextBox
                    x:Name="DbUserBox"
                    Width="200"
                    Text="postgres" />

                <TextBlock Margin="0,8,0,4" Text="Пароль:" />
                <PasswordBox x:Name="DbPasswordBox" Width="200" />
            </StackPanel>

            <!--  Оформление (плейсхолдер)  -->
            <StackPanel x:Name="DesignSettingsPanel" Visibility="Collapsed">
                <TextBlock Margin="0,0,0,4" Text="Настройки оформления (пусто)" />
            </StackPanel>

            <!--  Другое (плейсхолдер)  -->
            <StackPanel x:Name="OtherSettingsPanel" Visibility="Collapsed">
                <TextBlock Margin="0,0,0,4" Text="Прочие настройки (пусто)" />
            </StackPanel>

            <!--  Кнопки  -->
            <StackPanel Margin="0,20,0,0" Orientation="Horizontal">
                <Button
                    x:Name="ApplyButton"
                    Width="100"
                    Margin="0,0,8,0"
                    Command="{Binding ApplySettingsCommand}"
                    Content="Применить" />
                <Button
                    x:Name="CancelButton"
                    Width="80"
                    Content="Отмена" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>