<Window
    x:Class="ReportEngine.App.Views.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Настройки приложения"
    Topmost="True" 
    Width="700"
    Height="500"
    mc:Ignorable="d">

    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Меню категорий -->
        <ListBox
            x:Name="SettingsCategories"
            Margin="0,0,16,0"
            BorderThickness="0"
            SelectionChanged="SettingsCategories_SelectionChanged">
            <ListBoxItem Content="Основные" IsSelected="True" Tag="GeneralSettings" />
            <ListBoxItem Content="Подключение" Tag="ConnectionSettings" />
            <ListBoxItem Content="Оформление" Tag="DesignSettings" />
            <ListBoxItem Content="Другое" Tag="OtherSettings" />
        </ListBox>

        <!-- Область с настройками -->
        <StackPanel
            Grid.Column="1"
            Background="{DynamicResource MaterialDesignPaper}"
            Margin="0">

            <!-- Заголовок -->
            <TextBlock
                x:Name="SettingsTitle"
                Text="Основные настройки"
                FontSize="20"
                FontWeight="Bold"
                Margin="0 0 0 10" />

            <!-- Основные настройки -->
            <StackPanel x:Name="GeneralSettingsPanel" Visibility="Visible">
                <TextBlock Text="Директория для сохранения отчётов:" Margin="0 0 0 4" />
                <DockPanel>
                    <TextBox
                        x:Name="ReportDirBox"
                        Width="400"
                        Text="{Binding SaveReportDirPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <Button
                        x:Name="BrowseReportDirButton"
                        Content="..."
                        Width="40"
                        Margin="4,0,0,0"
                        Command="{Binding OpenDialog}"/>
                </DockPanel>
            </StackPanel>

            <!-- Подключение -->
            <StackPanel x:Name="ConnectionSettingsPanel" Visibility="Collapsed">
                <TextBlock Text="Адрес сервера БД:" Margin="0 0 0 4" />
                <TextBox
                    x:Name="DbServerBox"
                    Width="400"
                    Text="{Binding ConnectionString, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Порт:" Margin="0 8 0 4" />
                <TextBox
                    x:Name="DbPortBox"
                    Width="100"
                    Text="5432" />

                <TextBlock Text="Имя базы:" Margin="0 8 0 4" />
                <TextBox
                    x:Name="DbNameBox"
                    Width="200"
                    Text="mydb" />

                <TextBlock Text="Пользователь:" Margin="0 8 0 4" />
                <TextBox
                    x:Name="DbUserBox"
                    Width="200"
                    Text="postgres" />

                <TextBlock Text="Пароль:" Margin="0 8 0 4" />
                <PasswordBox x:Name="DbPasswordBox" Width="200" />
            </StackPanel>

            <!-- Оформление (плейсхолдер) -->
            <StackPanel x:Name="DesignSettingsPanel" Visibility="Collapsed">
                <TextBlock Text="Настройки оформления (пусто)" Margin="0 0 0 4" />
            </StackPanel>

            <!-- Другое (плейсхолдер) -->
            <StackPanel x:Name="OtherSettingsPanel" Visibility="Collapsed">
                <TextBlock Text="Прочие настройки (пусто)" Margin="0 0 0 4" />
            </StackPanel>

            <!-- Кнопки -->
            <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                <Button
                    x:Name="ApplyButton"
                    Content="Применить"
                    Width="100"
                    Margin="0,0,8,0"
                    Command="{Binding ApplySettingsCommand}"/>
                <Button
                    x:Name="CancelButton"
                    Content="Отмена"
                    Width="80"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>